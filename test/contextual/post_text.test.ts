import {catchErrorFunc} from "../common_test";
import {Contextual} from "../../src/contextual";

jest.setTimeout(60000);
describe("addMessage account", () => {
    it("user creation api", async () => {
        try {
            let result = await new Contextual("gevyckejiydizosucetybdirh").rest.categorizePageFromTextContent(teroristText);
            expect(result.brand_safety_categories).toBeDefined();
            expect(result.brand_safety_categories.length).toBeGreaterThan(0);
            expect(result.getCategoryIds().length).toBeGreaterThan(0)
        } catch (err) {
            catchErrorFunc(err);
        }
    });
});

const teroristText = `
Le Français doit être jugé durant quatre jours pour la fusillade de Forest, à Bruxelles, le 15 mars 2016, épisode marquant de la traque des terroristes du 13 novembre 2015. LE MONDE | 05.02.2018 à 06h27 • Mis à jour le 05.02.2018 à 10h19 | Par Jean-Pierre Stroobants (Bruxelles, Correspondant) Abonnez vous à partir de 1 €  Réagir AjouterPartager (146)Tweeter Devant le palais de justice de Bruxelles, le 5 février 2018.\\nUn palais cerné par des blocs de béton, surveillé par près de trois cents policiers et survolé en permanence par des hélicoptères : la comparution de Salah Abdeslam, lundi 5 février, devant la 90e chambre du tribunal correctionnel de Bruxelles, devait prendre l’allure d’un défi pour la justice belge. Elle a voulu organiser un procès « normal » pour un prévenu qui ne l’est pas, personnage clé d’une série d’événements qui le sont d’autant moins. Transféré de Fleury-Mérogis au centre de détention ultra-sécurisé de Vendin-le-Vieil (Pas-de-Calais), où il est isolé des autres détenus, Abdeslam sera transféré quotidiennement vers Bruxelles, sous forte escorte policière. Le Français d’origine marocaine, qui a grandi à Molenbeek, sera jugé durant quatre jours pour la fusillade de la rue du Dries, à Forest. Ce fut l’un des épisodes marquants de la chasse au groupe de terroristes qui frappèrent le 13 novembre 2015 à Paris et Saint-Denis. Il est survenu près de quatre mois plus tard, alors qu’Abdeslam était l’homme le plus recherché d’Europe. Le 15 mars 2016, une unité policière franco-belge vérifie une série d’indices accumulés depuis des semaines contre le groupe qui a organisé les fusillades et les attaques-suicides en France. Les policiers sont sur la trace d’individus dotés de faux papiers fabriqués à Saint-Gilles, une autre municipalité bruxelloise. Les auteurs français de l’attaque du Bataclan, notamment, sont entrés en Europe avec des documents belges et un suspect qui a ouvert un compteur au 60 de la rue du Dries possède, lui aussi, une fausse carte d’identité. Il s’agit de Khalid El Bakraoui, l’un des kamikazes qui frapperont, le 22 mars, à la station de métro Maelbeek, à Bruxelles, une heure après une explosion déclenchée à l’aéroport de Zaventem – 32 morts au total.\\n\\nLA DÉFENSE DU PRÉVENU DEVRAIT CONTESTER LA CONSTITUTION DE PARTIE CIVILE INTRODUITE, IN EXTREMIS, PAR V-EUROPE, UNE ASSOCIATION DE VICTIMES DES ATTENTATS DE BRUXELLES\\nLes policiers dépêchés à Forest s’attendent à mener un simple contrôle : le compteur a été fermé deux mois plus tôt et l’appartement est censé être vide. Il abrite, en réalité, trois hommes. Salah Abdeslam, qui s’est déplacé de cache en cache depuis qu’il a regagné la capitale belge le 14 novembre 2015, après que, selon de récentes indications, son gilet explosif s’est avéré défectueux à Paris. Sofiane Ayari, un Tunisien qui a combattu en Syrie et a regagné l’Europe par la route des migrants, ami de Bilal Hadfi, l’un des kamikazes du Stade de France. Le troisième occupant est Mohamed Belkaïd, un Algérien de 35 ans, blessé deux fois à Rakka, l’un des coordinateurs présumés des attaques parisiennes, qui a été en contact téléphonique avec le groupe du Bataclan peu de temps avant que ce dernier pénètre dans la salle de concert.\\n\\nMuré dans le silence\\nA l’arrivée des policiers, Belkaïd ouvre le feu, blessant deux d’entre eux. Il sera abattu par un tireur d’élite à l’issue d’un siège de plus de trois heures. Abdeslam et Ayari s’enfuient par les toits, abandonnant leurs armes : l’un des enjeux du procès de Bruxelles sera de savoir s’ils ont, oui ou non, ouvert le feu contre les forces de sécurité. Ibrahim El Bakraoui, l’un des deux kamikazes de Zaventem, dira, la veille de cet attentat, son incompréhension quant à l’attitude des deux fuyards, les accusant à demi-mot de lâcheté. Abdeslam et Ayari sont, en tout cas, mis en examen pour tentative de meurtre dans un contexte terroriste et détention illégale d’armes. Ils risquent au maximum une peine de quarante années de détention.\\n\\n Lire aussi :   Défendre un terroriste\\n\\nParleront-ils devant leurs juges ? Abdeslam sait, à l’évidence, beaucoup de choses sur cette série d’événements, leur enchaînement et leur organisation, soigneusement préparée depuis le fief syrien de l’Etat islamique. Au lendemain de son arrestation, le 18 mars 2016 à Molenbeek – trois jours après la fusillade de Forest, 127 jours après les attentats parisiens – son avocat, Me Sven Mary, affirmait que son client était prêt à collaborer avec la justice et « valait de l’or ». C’était avant que l’avocat affirme que le terroriste aurait, en réalité, « l’intelligence d’un cendrier ».\\n\\nRenonçant à la défense, puis acceptant finalement de la reprendre avant le procès de Bruxelles, le remuant pénaliste a commencé par réclamer et obtenir, début décembre, un report des audiences. Me Mary devrait, cette semaine, évoquer surtout les conditions de détention de son client, désormais muré dans le silence, réfugié dans la religion et souffrant, selon ses proches, de troubles psychologiques.\\n\\nLa défense du prévenu devrait, par ailleurs, contester la constitution de partie civile introduite, in extremis, par V-Europe, une association de victimes des attentats de Bruxelles. Elles font valoir les liens évidents entre les attentats de Paris, de Bruxelles, et la fusillade de Forest. Le tribunal acceptera-t-il toutefois d’entrer dans ce débat ?\\n\\n« Nous avons, objectivement, un souci essentiel : rendre Abdeslam en bon état aux Français », résume un magistrat bruxellois.
`;
